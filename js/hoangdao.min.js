function SolarAndLunar(a){var a;this.date=a,this.giohoangdao={1:[1,2,4,7,9,10],2:[3,4,6,9,11,12],3:[1,2,5,6,8,11],4:[1,3,4,7,8,10],5:[3,5,6,9,10,12],6:[2,5,7,8,11,12],7:[1,2,4,7,9,10],8:[3,4,6,9,11,12],9:[1,2,5,6,8,11],10:[1,3,4,7,8,10],11:[3,5,6,9,10,12],12:[2,5,7,8,11,12]},this.ngayhoangdao={1:[{hoangdao:[1,2,6,8],hacdao:[4,7,10,12]}],2:[{hoangdao:[3,4,8,10],hacdao:[2,6,9,12]}],3:[{hoangdao:[5,6,10,12],hacdao:[2,4,8,11]}],4:[{hoangdao:[2,7,8,12],hacdao:[1,4,6,10]}],5:[{hoangdao:[2,4,9,10],hacdao:[3,6,8,12]}],6:[{hoangdao:[4,6,11,12],hacdao:[2,5,8,10]}],7:[{hoangdao:[1,2,6,8],hacdao:[4,7,10,12]}],8:[{hoangdao:[3,4,8,10],hacdao:[2,6,9,12]}],9:[{hoangdao:[5,6,10,12],hacdao:[2,4,8,11]}],10:[{hoangdao:[2,7,8,12],hacdao:[1,4,6,10]}],11:[{hoangdao:[2,4,9,10],hacdao:[3,6,8,12]}],12:[{hoangdao:[4,6,11,12],hacdao:[2,5,8,10]}]},this.holidays={1:{lunar:{1:"Tết Nguyên Đán",15:"Tết Nguyên Tiêu"},solar:{6:"Tổng tuyển cử bầu Quốc hội đầu tiên của nước Việt Nam dân chủ cộng hòa",7:"Chiến thắng biên giới Tây Nam chống quân xâm lược",9:"Ngày truyền thống học sinh, sinh viên Việt nam",13:"Khởi nghĩa Đô Lương",11:"Việt Nam gia nhập WTO",27:"Ký hiệp định Paris"}},2:{lunar:{},solar:{3:"Thành lập Đảng cộng sản Việt Nam",8:"Lãnh tụ Hồ Chí Minh trở về nước trực tiếp lãnh đạo cách mạng Việt Nam",27:"Ngày thầy thuốc Việt Nam",14:"Ngày lễ tình yêu"}},3:{lunar:{3:"Tết Hàn thực",10:"Giỗ tổ Hùng Vương"},solar:{8:"Ngày Quốc tế Phụ nữ",11:"Khởi nghĩa Ba Tơ",18:"Chiến thắng quân Trung Quốc xâm lược trên biên giới phía Bắc",26:"Ngày thành lập Đoàn TNCS Hồ Chí Minh"}},4:{lunar:{14:"Tết Dân tộc Khmer",15:"Lễ Phật Đản"},solar:{25:"Ngày tổng tuyển cử bầu quốc hội chung của cả nước",30:"Giải phóng Miền Nam, thống nhất tổ quốc"}},5:{lunar:{5:"Tết Đoan Ngọ"},solar:{1:"Ngày quốc tế lao động",7:"Chiến thắng Điện Biên Phủ",9:"Chiến thắng chủ nghĩa Phát xít",13:"Ngày của Mẹ",15:"Thành lập Đội TNTP Hồ Chí Minh",19:"Ngày sinh Chủ tịch Hồ Chí Minh"}},6:{lunar:{},solar:{1:"Quốc tế Thiếu nhi",5:"Nguyễn Tất Thành rời cảng Nhà Rồng ra đi tìm đường cứu nước",17:"Chiến thắng chủ nghĩa Phát xít",13:"Ngày của Bố",21:"Ngày báo chí Việt Nam",28:"Ngày gia đình Việt Nam"}},7:{lunar:{15:"Vu Lan"},solar:{2:"Nước ta đổi quốc hiệu từ Việt Nam dân chủ cộng hòa thành Cộng hòa XHCN Việt Nam",17:'Hồ chủ tịch ra lời kêu gọi "Không có gì quý hơn độc lập, tự do"',27:"Ngày thương binh, liệt sĩ",28:"Thành lập công đoàn Việt Nam(1929)/Ngày Việt Nam gia nhập Asean(1995)"}},8:{lunar:{1:"Tết Katê",15:"Tết Trung Thu"},solar:{1:"Ngày truyền thống công tác tư tưởng – văn hoá của Đảng",19:"Cách mạng tháng 8 (Ngày Công an nhân dân)",20:"Ngày sinh chủ tịch Tôn Đức Thắng"}},9:{lunar:{9:"Tết Trùng Cửu"},solar:{2:"Quốc khánh (1945)",10:"Thành lập Mặt trận Tổ quốc Việt Nam",12:"Xô Viết Nghệ Tĩnh",20:"Việt Nam trở thành thành viên Liên hiệp quốc",23:"Nam Bộ kháng chiến",27:"Khởi nghĩa Bắc Sơn"}},10:{lunar:{10:"Tết Trùng Thập"},solar:{1:"Ngày quốc tế người cao tuổi",10:"Giải phóng Thủ đô",14:"Ngày hội Nông dân Việt Nam",15:"Ngày truyền thống Hội thanh niên Việt Nam",20:"Thành lập Hội liên hiệp phụ nữ Việt Nam"}},11:{lunar:{},solar:{20:"Ngày nhà giáo Việt Nam",23:"Khởi nghĩa Nam Kỳ - Thành lập Hội chữ thập đỏ Việt Nam"}},12:{lunar:{23:"Ông Táo chầu trời"},solar:{1:"Ngày thế giới phòng chống AIDS",19:"Toàn quốc kháng chiến",22:"Thành lập quân đội nhân dân Việt Nam"}}},this.thu={1:"Thứ hai",2:"Thứ ba",3:"Thứ tư",4:"Thứ năm",5:"Thứ sáu",6:"Thứ bảy",7:"Chủ nhật"},this.thien_can={1:"Giáp",2:"Ất",3:"Bính",4:"Đinh",5:"Mậu",6:"Kỷ",7:"Canh",8:"Tân",9:"Nhâm",10:"Quý"},this.dia_chi={1:"Tý",2:"Sửu",3:"Dần",4:"Mão",5:"Thìn",6:"Tỵ",7:"Ngọ",8:"Mùi",9:"Thân",10:"Dậu",11:"Tuất",12:"Hợi"},this.zodiac_images={1:"Ty",2:"Suu",3:"Dan",4:"Mao",5:"Thin",6:"Ti",7:"Ngo",8:"Mui",9:"Than",10:"Dau",11:"Tuat",12:"Hoi"},this.dia_chi_month={11:"Tý",12:"Sửu",1:"Dần",2:"Mão",3:"Thìn",4:"Tỵ",5:"Ngọ",6:"Mùi",7:"Thân",8:"Dậu",9:"Tuất",10:"Hợi"},this.array_zodiac_hour={1:{id:1,name:"mouse",name_vi:"Tý",name_vi_vn:"Chuột",time_begin:23,time_end:1,month:11},2:{id:2,name:"buffalo",name_vi:"Sửu",name_vi_vn:"Trâu",time_begin:1,time_end:3,month:12},3:{id:3,name:"tiger",name_vi:"Dần",name_vi_vn:"Hổ",time_begin:3,time_end:5,month:1},4:{id:4,name:"cat",name_vi:"Mão",name_vi_vn:"Mèo",time_begin:5,time_end:7,month:2},5:{id:5,name:"dragon",name_vi:"Thìn",name_vi_vn:"Rồng",time_begin:7,time_end:9,month:3},6:{id:6,name:"buffalo",name_vi:"Tỵ",name_vi_vn:"Rắn",time_begin:9,time_end:11,month:4},7:{id:7,name:"horse",name_vi:"Ngọ",name_vi_vn:"Ngựa",time_begin:11,time_end:13,month:5},8:{id:8,name:"goat",name_vi:"Mùi",name_vi_vn:"Dê",time_begin:13,time_end:15,month:6},9:{id:9,name:"monkey",name_vi:"Thân",name_vi_vn:"Khỉ",time_begin:15,time_end:17,month:7},10:{id:10,name:"chicken",name_vi:"Dậu",name_vi_vn:"Gà",time_begin:17,time_end:19,month:8},11:{id:11,name:"dog",name_vi:"Tuất",name_vi_vn:"Chó",time_begin:19,time_end:21,month:9},12:{id:12,name:"pig",name_vi:"Hợi",name_vi_vn:"Lợn",time_begin:21,time_end:23,month:10}},this.array_zodiac_hour_get=[{id:1,name:"mouse",name_vi:"Tý",name_vi_vn:"Chuột",time_begin:23,time_end:1,month:11},{id:2,name:"buffalo",name_vi:"Sửu",name_vi_vn:"Trâu",time_begin:1,time_end:3,month:12},{id:3,name:"tiger",name_vi:"Dần",name_vi_vn:"Hổ",time_begin:3,time_end:5,month:1},{id:4,name:"cat",name_vi:"Mão",name_vi_vn:"Mèo",time_begin:5,time_end:7,month:2},{id:5,name:"dragon",name_vi:"Thìn",name_vi_vn:"Rồng",time_begin:7,time_end:9,month:3},{id:6,name:"buffalo",name_vi:"Tỵ",name_vi_vn:"Rắn",time_begin:9,time_end:11,month:4},{id:7,name:"horse",name_vi:"Ngọ",name_vi_vn:"Ngựa",time_begin:11,time_end:13,month:5},{id:8,name:"goat",name_vi:"Mùi",name_vi_vn:"Dê",time_begin:13,time_end:15,month:6},{id:9,name:"monkey",name_vi:"Thân",name_vi_vn:"Khỉ",time_begin:15,time_end:17,month:7},{id:10,name:"chicken",name_vi:"Dậu",name_vi_vn:"Gà",time_begin:17,time_end:19,month:8},{id:11,name:"dog",name_vi:"Tuất",name_vi_vn:"Chó",time_begin:19,time_end:21,month:9},{id:12,name:"pig",name_vi:"Hợi",name_vi_vn:"Lợn",time_begin:21,time_end:23,month:10}],this.INT=function(b){return Math.floor(b)},this.jdFromDate=function(d,b,g){var c=this.INT((14-b)/12),k=g+4800-c,f=b+12*c-3,j=d+this.INT((153*f+2)/5)+365*k+this.INT(k/4)-this.INT(k/100)+this.INT(k/400)-32045;return 2299161>j&&(j=d+this.INT((153*f+2)/5)+365*k+this.INT(k/4)-32083),j},this.jdToDate=function(p){if(p>2299160){var m=p+32044,k=this.INT((4*m+3)/146097),g=m-this.INT(146097*k/4)}else{k=0,g=p+32082}var f=this.INT((4*g+3)/1461),j=g-this.INT(1461*f/4),d=this.INT((5*j+2)/153),q=j-this.INT((153*d+2)/5)+1,l=d+3-12*this.INT(d/10),b=100*k+f-4800+this.INT(d/10);return[q,l,b]},this.getNewMoonDay=function(y,x){var u=y/1236.85,m=u*u,j=m*u,p=Math.PI/180,f=2415020.75933+29.53058868*y+0.0001178*m-1.55e-7*j;f+=0.00033*Math.sin((166.56+132.87*u-0.009173*m)*p);var z=359.2242+29.10535608*y-0.0000333*m-0.00000347*j,w=306.0253+385.81691806*y+0.0107306*m+0.00001236*j,b=21.2964+390.67050646*y-0.0016528*m-0.00000239*j,q=(0.1734-0.000393*u)*Math.sin(z*p)+0.0021*Math.sin(2*p*z);if(q=q-0.4068*Math.sin(w*p)+0.0161*Math.sin(2*p*w),q-=0.0004*Math.sin(3*p*w),q=q+0.0104*Math.sin(2*p*b)-0.0051*Math.sin(p*(z+w)),q=q-0.0074*Math.sin(p*(z-w))+0.0004*Math.sin(p*(2*b+z)),q=q-0.0004*Math.sin(p*(2*b-z))-0.0006*Math.sin(p*(2*b+w)),q=q+0.001*Math.sin(p*(2*b-w))+0.0005*Math.sin(p*(2*w+z)),-11>u){var k=0.001+0.000839*u+0.0002261*m-0.00000845*j-8.1e-8*u*j}else{k=-0.000278+0.000265*u+0.000262*m}var v=f+q-k;return this.INT(v+0.5+x/24)},this.getSunLongitude=function(p,m){var k=(p-2451545.5-m/24)/36525,g=k*k,f=Math.PI/180,j=357.5291+35999.0503*k-0.0001559*g-4.8e-7*k*g,d=280.46645+36000.76983*k+0.0003032*g,q=(1.9146-0.004817*k-0.000014*g)*Math.sin(f*j);q=q+(0.019993-0.000101*k)*Math.sin(2*f*j)+0.00029*Math.sin(3*f*j);var l=d+q,b=125.04-1934.136*k;return l=l-0.00569-0.00478*Math.sin(b*f),l*=f,l-=2*Math.PI*this.INT(l/(2*Math.PI)),this.INT(l/Math.PI*6)},this.getLunarMonth11=function(d,b){var g=this.jdFromDate(31,12,d)-2415021,c=this.INT(g/29.530588853),j=this.getNewMoonDay(c,b),f=this.getSunLongitude(j,b);return f>=9&&(j=this.getNewMoonDay(c-1,b)),j},this.getLeapMonthOffset=function(d,b){var g=this.INT((d-2415021.076998695)/29.530588853+0.5),c=0,j=1,f=this.getSunLongitude(this.getNewMoonDay(g+j,b),b);do{c=f,j+=1,f=this.getSunLongitude(this.getNewMoonDay(g+j,b),b)}while(f!=c&&14>j);return j-1},this.convertSolar2Lunar=function(E){var B=this.date.split("/"),y=this.INT(B[0]),p=this.INT(B[1]),k=this.INT(B[2]),q=this.jdFromDate(y,p,k),j=this.INT((q-2415021.076998695)/29.530588853),F=this.getNewMoonDay(j+1,E);F>q&&(F=this.getNewMoonDay(j,E));var A=this.getLunarMonth11(k,E),b=A;if(A>=F){var w=k;A=this.getLunarMonth11(k-1,E)}else{w=k+1,b=this.getLunarMonth11(k+1,E)}var m=q-F+1,z=this.INT((F-A)/29),D=0,x=z+11;if(b-A>365){var C=this.getLeapMonthOffset(A,E);z>=C&&(x=z+10,z==C&&(D=1))}return x>12&&(x-=12),x>=11&&4>z&&(w-=1),[m,x,w,D]},this.convertLunar2Solar=function(w,v,q,k,f){if(11>v){var m=this.getLunarMonth11(q-1,f),d=this.getLunarMonth11(q,f)}else{m=this.getLunarMonth11(q,f),d=this.getLunarMonth11(q+1,f)}var x=this.INT(+(m-2415021.076998695)/29.530588853),u=v-11;if(0>u&&(u+=12),d-m>365){var b=this.getLeapMonthOffset(m,f),p=b-2;if(0>p&&(p+=12),0!=k&&v!=p){return{0:0,1:0,2:0}}(0!=k||u>=b)&&(u+=1)}var j=this.getNewMoonDay(x+u,f);return this.jdToDate(j+w-1)},this.getCanChi_Year=function(c){var b=this.thien_can[(this.INT(c)+6)%10+1],d=this.dia_chi[(this.INT(c)+8)%12+1];return b+" "+d},this.getCanChi_Month=function(d,b){var f=this.thien_can[(12*this.INT(b)+this.INT(d)+3)%10+1],c=this.dia_chi_month[this.INT(d)];return f+" "+c},this.getCanChi_Date=function(d,b,g){var c=this.date.split("/");d=this.INT(c[0]),b=this.INT(c[1]),g=this.INT(c[2]);var k=this.jdFromDate(d,b,g),f=this.thien_can[(this.INT(k)+9)%10+1],j=this.dia_chi[(this.INT(k)+1)%12+1];return f+" "+j},this.getImage_DateZodiac=function(){var d=this.date.split("/"),b=this.INT(d[0]),g=this.INT(d[1]),c=this.INT(d[2]),j=this.jdFromDate(b,g,c),f=this.zodiac_images[(this.INT(j)+1)%12+1];return f},this.getCanChi_Thu=function(d,b,g){var c=this.date.split("/");d=this.INT(c[0]),b=this.INT(c[1]),g=this.INT(c[2]);var j=this.jdFromDate(d,b,g),f=this.thu[this.INT(j)%7+1];return f},this.getHour=function(d){var b=this.array_zodiac_hour_get.filter(function(e){return e.time_begin<=d&&e.time_end>d});for(var f in b){var c=b[f];return c.name_vi}},this.getGioHoangDao=function(p,m,k){var g=this.date.split("/");p=this.INT(g[0]),m=this.INT(g[1]),k=this.INT(g[2]);var f=this.jdFromDate(p,m,k),j=this.giohoangdao[(this.INT(f)+1)%12+1],d={},q=0;for(var l in j){var b=j[l];d[q]={name:this.array_zodiac_hour[b].name_vi,time_begin:this.array_zodiac_hour[b].time_begin,time_end:this.array_zodiac_hour[b].time_end},q++}return d},this.checkNgayHoangDao=function(d){var b=this.ngayhoangdao[this.INT(d)],j=this.date.split("/"),c=this.INT(j[0]),l=this.INT(j[1]),g=this.INT(j[2]),k=this.jdFromDate(c,l,g),f=(this.INT(k)+1)%12+1;return b[0]&&b[0].hoangdao&&b[0].hoangdao.indexOf(f)>-1?"Ngày hoàng đạo":b&&b[0].hacdao&&b[0].hacdao.indexOf(f)>-1?"Ngày hắc đạo":""},this.getHoliday=function(d,b,g){var c=this.date.split("/"),j=this.INT(c[0]),f=this.INT(c[1]);this.INT(c[2]);return this.holidays[this.INT(b)]&&this.holidays[this.INT(b)].lunar[this.INT(d)]?this.holidays[this.INT(b)].lunar[this.INT(d)]:this.holidays[this.INT(f)]&&this.holidays[this.INT(f)].solar[this.INT(j)]?this.holidays[this.INT(f)].solar[this.INT(j)]:""},this.parseCalendar=function(p,I){var F=this.date.split("/"),B=this.INT(F[0]),y=this.INT(F[1]),C=this.INT(F[2]),x=p.prototype.convertSolar2Lunar(7),q=x[0],H=x[1],w=x[2],D=!1;1==w&&(D=!0);var z=p.prototype.getGioHoangDao(q,H,w),G="",m=1,E=Object.keys(z).length;for(var j in z){var J=z[j];G+=J.name+"("+J.time_begin+"h - "+J.time_end+"h), ",m%2==0&&m>0&&E>m&&(G+="<br/>"),m++}G=G.substr(0,G.length-2);var b=new Date(C,y-1,B);b.setDate(b.getDate()-1);var A=new Date(C,y-1,B);return A.setDate(A.getDate()+1),{date:{lunar:q,solar:B,zodiac:p.prototype.getCanChi_Date(q,H,w)},month:{lunar:H,solar:y,zodiac:p.prototype.getCanChi_Month(H,w)},year:{lunar:w,solar:C,zodiac:p.prototype.getCanChi_Year(w)},day:p.prototype.getCanChi_Thu(q,H,w),hour:p.prototype.getHour(I),hour_zodiac:G,zodiac:p.prototype.checkNgayHoangDao(H),image:p.prototype.getImage_DateZodiac(),leap_year:D,current_date:this.date,prev_date:b.getDate()+"/"+(b.getMonth()+1)+"/"+b.getFullYear(),next_date:A.getDate()+"/"+(A.getMonth()+1)+"/"+A.getFullYear(),holiday:p.prototype.getHoliday(q,H,w)}}}function loadCalendar(d){var b=(new Date).getHours();SolarAndLunar.prototype=new SolarAndLunar(d);var f=SolarAndLunar.prototype.parseCalendar(SolarAndLunar,b);console.log(f),date_zodiac=""==f.holiday?f.zodiac:f.holiday,""==date_zodiac.trim()&&(date_zodiac="<br/>");var c='<div class="hdngay"><div class="ngay_nd1">LỊCH VẠN SỰ THÁNG '+f.month.solar+" NĂM "+f.year.solar+'</div><div class="ngay_nd2"><form action="" method="post" name="frmLichngay"><input type="hidden" name="date"><span class="prev_date" onclick="frmLichngay.date.value = \''+f.prev_date+"';loadCalendar('"+f.prev_date+'\');" > ‹ </span> </span><span id="blue"> '+f.date.solar+'</span><span class="next_date" onclick="frmLichngay.date.value = \''+f.next_date+"';loadCalendar('"+f.next_date+'\');" > › </span> </span></form></div><div class="ngay_nd3"><span style="color: gray;">'+date_zodiac+'</span></div><div class="ngay_nd4">Giờ Hoàng Đạo: '+f.hour_zodiac+'</div><div class="tt_ngay"><table width="100%" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td class="tt_ngay_1">&nbsp;</td><td class="tt_ngay_2"><div class="lvs_thu">'+f.day+' </div></td><td class="tt_ngay_3"><span style="font-size: 15px" id="oclock"></span></td><td class="tt_ngay_4"><div class="lvs_thu">Tháng '+f.month.lunar+'</div></td><td class="tt_ngay_1">&nbsp;</td></tr><tr><td height="1px"></td><td colspan="3" height="1px" class=""></td><td height="1px"></td></tr><tr><td class="tt_ngay_1">&nbsp;</td><td class="tt_ngay_2 kc_tt_ngay">Giờ '+f.hour+"<br>Ngày "+f.date.zodiac+"<br>Tháng "+f.month.zodiac+'</td><td class="tt_ngay_3"><div class="image_zodiac zodiac_'+f.image+'"></div></td><td class="tt_ngay_4 kc_tt_ngay"><div class="lvs_am"> '+f.date.lunar+"</div>Năm "+f.year.zodiac+'</td><td class="tt_ngay_1">&nbsp;</td></tr></tbody></table></div></div>';document.getElementById("cunghoangdao").innerHTML=c,oclock()}function oclock(){var d=new Date,b=d.getHours(),f=d.getMinutes(),c=d.getSeconds();10>b&&(b="0"+b),10>f&&(f="0"+f),10>c&&(c="0"+c),document.getElementById("oclock").innerHTML=b+":"+f+":"+c}SolarAndLunar.prototype.thien_can=null,SolarAndLunar.prototype.dia_chi=null,SolarAndLunar.prototype.dia_chi_month=null,SolarAndLunar.prototype.array_zodiac_hour=null,SolarAndLunar.prototype.array_zodiac_hour_get=null,SolarAndLunar.prototype.thu=null,SolarAndLunar.prototype.giohoangdao=null,SolarAndLunar.prototype.ngayhoangdao=null,SolarAndLunar.prototype.zodiac_images=null,SolarAndLunar.prototype.holidays=null;var today=new Date,dd=today.getDate(),mm=today.getMonth()+1,yyyy=today.getFullYear();if(void 0===SelectedDomain_CSS){var SelectedDomain_CSS=""}document.write('<link href="'+SelectedDomain_CSS+'//rawgit.com/ntpvt/searchtools.top/master/css/hoangdao.min.css" rel="stylesheet" type="text/css" /><div id="cunghoangdao"></div>'),loadCalendar(today.getDate()+"/"+(today.getMonth()+1)+"/"+today.getFullYear()),setInterval("oclock()",1000);
